(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t(15),o=t.n(a),u=(t(21),t(6)),i=t(3),s=t(4),l=t.n(s),d="/api/persons",h={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},b=function(e){return Object(c.jsxs)("div",{children:["Filter shown with ",Object(c.jsx)("input",{value:e.filterValue,onChange:e.handleFilterChange})]})},j=function(e){return Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},f=function(e){var n=e.person,t=e.removePerson;return Object(c.jsxs)("div",{children:[n.name," ",n.number,Object(c.jsx)("button",{onClick:t,children:"Delete"})]})},m=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"confirmation",children:n})},O=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},p=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),l=s[0],d=s[1],p=Object(r.useState)(""),v=Object(i.a)(p,2),x=v[0],g=v[1],w=Object(r.useState)(""),C=Object(i.a)(w,2),N=C[0],k=C[1],S=Object(r.useState)(null),y=Object(i.a)(S,2),P=y[0],T=y[1],A=Object(r.useState)(null),D=Object(i.a)(A,2),U=D[0],F=D[1];Object(r.useEffect)((function(){h.getAll().then((function(e){a(e)}))}),[]);var E=function(e){var n=t.find((function(n){return n.id===e})),c=Object(u.a)(Object(u.a)({},n),{},{number:x});window.confirm("Do you want to update the contact ".concat(n.name," with a new number?"))&&h.update(e,c).then((function(c){a(t.map((function(n){return n.id!==e?n:c}))),T("Success! ".concat(n.name," has been updated in the phonebook.")),setTimeout((function(){T(null)}),5e3),d(""),g("")})).catch((function(c){F("Oh no! The phonebook entry for '".concat(n.name,"' was already removed from the server.")),setTimeout((function(){F(null)}),5e3),a(t.filter((function(n){return n.id!==e}))),d(""),g("")}))},J=""===N?t:t.filter((function(e){return e.name.toUpperCase().includes(N.toUpperCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(m,{message:P}),Object(c.jsx)(O,{message:U}),Object(c.jsx)(b,{filterValue:N,handleFilterChange:function(e){k(e.target.value)}}),Object(c.jsx)("h2",{children:"Add new entry"}),Object(c.jsx)(j,{addPerson:function(e){e.preventDefault();for(var n={name:l,number:x},c=0;c<t.length;c++)if(t[c].name.toUpperCase()===n.name.toUpperCase())return void E(t[c].id);h.create(n).then((function(e){a(t.concat(e)),T("Success! ".concat(l," has been added to the phonebook.")),setTimeout((function(){T(null)}),5e3),d(""),g("")})).catch((function(e){var n=e.response.data;F("".concat(n.error)),setTimeout((function(){F(null)}),5e3)}))},newName:l,handleNameChange:function(e){d(e.target.value)},newNumber:x,handleNumberChange:function(e){g(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),J.map((function(e,n){return Object(c.jsx)(f,{person:e,removePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&h.remove(e).then((function(n){a(t.filter((function(n){return n.id!==e})))}))}(e.id)}},n)}))]})};o.a.render(Object(c.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f525422a.chunk.js.map