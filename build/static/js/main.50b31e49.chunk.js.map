{"version":3,"sources":["services/PersonsService.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/ConfirmationNotification.js","components/ErrorNotification.js","App.js","index.js"],"names":["baseUrl","PersonsService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","remove","delete","Filter","props","value","filterValue","onChange","handleFilterChange","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Person","person","removePerson","name","number","onClick","ConfirmationNotification","message","className","ErrorNotification","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterValue","showAll","setShowAll","confirmationMessage","setConfirmationMessage","errorMessage","setErrorMessage","useEffect","initialPersons","updatePerson","find","p","changedPerson","window","confirm","returnedPerson","map","setTimeout","catch","error","filter","personsToShow","toUpperCase","includes","event","target","preventDefault","personObject","i","length","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.50b31e49.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response  => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst PersonsService = {getAll, create, update, remove}\nexport default PersonsService","import React from 'react'\n\nconst Filter = (props) => {\n    return (\n        <div>\n            Filter shown with <input\n                value={props.filterValue}\n                onChange={props.handleFilterChange}\n            />\n        </div>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) => {\n    return (\n        <form onSubmit={props.addPerson}>\n            <div>\n                Name: <input\n                    value={props.newName}\n                    onChange={props.handleNameChange}\n                />\n            </div>\n            <div>\n                Number: <input\n                    value={props.newNumber}\n                    onChange={props.handleNumberChange}\n                />\n            </div>\n            <div>\n                <button type=\"submit\">Add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Person = ({person, removePerson}) => {\n    return (\n    <div>\n        {person.name} {person.number}  \n        <button onClick={removePerson}>Delete</button>\n    </div>\n    )\n}\n\nexport default Person","import React from 'react'\n\nconst ConfirmationNotification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n        <div className=\"confirmation\">\n            {message}\n        </div>\n    )\n}\n\nexport default ConfirmationNotification","import React from 'react'\n\nconst ErrorNotification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nexport default ErrorNotification","import React, { useEffect, useState } from 'react'\nimport PersonsService from './services/PersonsService'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Person from './components/Person'\nimport ConfirmationNotification from './components/ConfirmationNotification'\nimport ErrorNotification from './components/ErrorNotification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterValue, setFilterValue] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [confirmationMessage, setConfirmationMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    PersonsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    for (let i = 0; i < persons.length; i++) {\n      if (persons[i].name.toUpperCase() === personObject.name.toUpperCase()) {\n        updatePerson(persons[i].id)\n        return\n      }\n    }\n    \n    PersonsService\n      .create(personObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setConfirmationMessage(`Success! ${newName} has been added to the phonebook.`)\n        setTimeout(() => {\n          setConfirmationMessage(null)\n        }, 5000)\n        setNewName('')\n        setNewNumber('')\n      })\n  }\n\n  const updatePerson = id => { //old entry's id!\n    const person = persons.find(p => p.id === id)\n    const changedPerson = { ...person, number: newNumber }\n\n    if (window.confirm(`Do you want to update the contact ${person.name} with a new number?`)) {\n      PersonsService\n        .update(id, changedPerson)\n        .then(returnedPerson => {\n          setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n          setConfirmationMessage(`Success! ${person.name} has been updated in the phonebook.`)\n          setTimeout(() => {\n            setConfirmationMessage(null)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          setErrorMessage(\n            `Oh no! The phonebook entry for '${person.name}' was already removed from the server.`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setPersons(persons.filter(p => p.id !== id))\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n  }\n\n  const removePerson = id => {\n    const person = persons.find(p => p.id === id)\n\n    if (window.confirm(`Delete ${person.name}?`)) {\n      PersonsService\n        .remove(id)\n        .then(returnedPerson =>  {\n          setPersons(persons.filter(p => p.id !== id))\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    //console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    //console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n  \n  const handleFilterChange = (event) => {\n    setFilterValue(event.target.value)\n    if (filterValue !== '') {\n      setShowAll(false)\n    }\n  }\n\n  const personsToShow =  showAll\n    ? persons\n    : persons.filter(person => person.name.toUpperCase().includes(filterValue.toUpperCase()))\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <ConfirmationNotification message={confirmationMessage} />\n      <ErrorNotification message={errorMessage} />\n      <Filter \n        filterValue={filterValue}\n        handleFilterChange={handleFilterChange} />\n      <h2>Add new entry</h2>\n      <PersonForm \n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      {personsToShow.map((person, i) =>\n        <Person \n          key={i}\n          person={person}\n          removePerson={() => removePerson(person.id)}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}